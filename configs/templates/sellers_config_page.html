{% load compress %}
{% load static %}
{% load custom_filters %}
<!DOCTYPE html>
<html lang="en">
<head>
{% include "base_head.html" %}
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" href="{% static 'custumers/component.css' %}?{% now "d" %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'configs/config_page.css' %}?{% now "d" %}">
</head>

<body dir="">
    {% include "navbar_sellers.html" %}
    {% include 'messages.html' %}
    <div id="main">

    {% if not service %}
            <h3 dir="rtl" id="conf_name">Ø§ÛŒÙ† Ø³Ø±ÙˆÛŒØ³ Ù„ØºÙˆ Ø´Ø¯Ù‡ Ø§Ø³Øª.</h3>
    {% else %}
        <h3 id="conf_name">{{ service.name|split_name }}</h3>


        {% if service.status == 1 %}
            <h4 id="dis" dir="rtl">â›” Ø§ÛŒÙ† Ú©Ø§Ù†ÙÛŒÚ¯ ØºÛŒØ±ÙØ¹Ø§Ù„ Ø§Ø³Øª. â›”</h4>
        {% endif %}
        <div id="box1">
            <div class="show_usage">
                {% if service.usage_limit == 0  %}
                    <div class="centering">
                        <h4 class="usage_text">{{ service.usage|floatformat:2 }}GB / <span style="font-size: x-large">âˆ</span></h4>
                        <div class="progress progressÙ€usage_box">
                            {% if service.start_time == 0 %}
                                <div class="progressÙ€usage progress-bar bg-success" role="progressbar" style="width:100%" aria-confinfonow="100" aria-confinfomin="0" aria-confinfomax="100">Not Started</div>
                            {% else %}
                                <div class="progressÙ€usage progress-bar bg-unlimit" role="progressbar" style="width: 100%" aria-confinfonow="100" aria-confinfomin="0" aria-confinfomax="100">âˆ</div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="safd">
                        <div class="kdfj" >
{#                        {% if service.uuid|infinit_limit %}#}
{#                            <h3 class="sys_limit">â›” {{ config_usage.uuid|infinit_limit }} GB â›” </h3><a style="font-size: x-large" href="{% url "servers:change_unlimit_limit" config_usage.uuid %}">ğŸ”ï¸</a>#}
{#                        {% endif %}#}
                         </div>
                    </div>
                {% else %}
                    {% if service.usage|percent:service.usage_limit > 99 %}
                        <div class="centering">
                            <h4 class="usage_text">{{ service.usage|floatformat:2 }}GB /{{ service.usage_limit }}GB</h4>
                            <div class="progress progressÙ€usage_box">
                                <div class="progressÙ€usage progress-bar bg-danger" role="progressbar" style="width: {{ service.usage|percent:service.usage_limit }}%" aria-confinfonow="{{ service.usage|percent:service.usage_limit }}" aria-confinfomin="0" aria-confinfomax="100">{{ service.usage|percent:service.usage_limit }}%</div>
                            </div>
                        </div>
                    {% elif service.usage|percent:service.usage_limit > 95 %}
                        <div class="centering">
                            <h4 class="usage_text">{{ service.usage|floatformat:2 }}GB /{{ service.usage_limit }}GB</h4>
                            <div class="progress progressÙ€usage_box">
                                <div class="progressÙ€usage progress-bar bg-warning" role="progressbar" style="width: {{ service.usage|percent:service.usage_limit }}%" aria-confinfonow="{{ service.usage|percent:service.usage_limit }}" aria-confinfomin="0" aria-confinfomax="100">{{ service.usage|percent:service.usage_limit }}%</div>
                            </div>
                        </div>
                    {% elif service.usage|percent:service.usage_limit > 0 %}
                        <div class="centering">
                            <h4 class="usage_text">{{ service.usage|floatformat:2 }}GB /{{ service.usage_limit }}GB</h4>
                            <div class="progress progressÙ€usage_box">
                                <div class="progressÙ€usage progress-bar bg-info" role="progressbar" style="width: {{ service.usage|percent:service.usage_limit }}%" aria-confinfonow="{{ service.usage|percent:service.usage_limit }}" aria-confinfomin="0" aria-confinfomax="100">{{ service.usage|percent:service.usage_limit }}%</div>
                            </div>
                        </div>
                    {% else %}
                        <div class="centering">
                            <h4 class="usage_text">{{ service.usage|floatformat:2 }}GB /{{ service.usage_limit }}GB</h4>
                            <div class="progress progressÙ€usage_box">
                                {% if service.start_time == 0  %}
                                    <div class="progressÙ€usage progress-bar bg-success" role="progressbar" style="width:100%" aria-confinfonow="{{ service.3 }}" aria-confinfomin="0" aria-confinfomax="100">Not Started</div>
                                {% else %}
                                    <div class="progressÙ€usage progress-bar bg-info" role="progressbar" style="width:0%" aria-confinfonow="0" aria-confinfomin="0" aria-confinfomax="100">0%</div>
                                {% endif %}
                            </div>
                        </div>
                    {% endif %}
                {% endif %}
            </div>
            <div class="show_time">
                {% if service.expire_time == 0 %}
                    <div class="time">
                        <h4 class="expire_text blue_infinite">â³ âˆ day</h4>
                    </div>
                {% elif service.start_time == 0 %}
                    <div class="time">
                        <h4 class="expire_text green">â³ {{ service.expire_time }} d</h4>
                    </div>
                {% elif service.expire_time|dh_int > 3 %}
                    <div class="time">
                        <h4 class="expire_text blue">â³ {{ service.expire_time|dh }}</h4>
                    </div>
                {% elif service.expire_time|dh_int > 0 %}
                    <div class="time">
                        <h4 class="expire_text orange">â³ {{ service.expire_time|dh }}</h4>
                    </div>

                {% else %}
                    <div class="time">
                        <h4 class="expire_text red">â³ {{ service.expire_time|dh }} ago</h4>
                    </div>
                {% endif %}


                <div class="time">
                    {% if service.user_limit == 0 %}
                        <h4 class="expire_text blue">ğŸ‘¤ âˆ user</h4>
                    {% else %}
                        <h4 class="expire_text blue">ğŸ‘¤ {{ service.user_limit }} user</h4>
                    {% endif %}
            </div>
            </div>

        </div>
        


        <div id="box2">
            <div>

                <div class="btnslist">
                    <button dir="rtl" class="btn" onclick="copyToClipboard('#bot_link')">ğŸ“‹ Ù„ÛŒÙ†Ú© Ø³Ø§Ø¨ ğŸ“‹</button>
                </div>

                <div class="btnslist">
                    <button class="btn" onclick="copyToClipboard('#vless')">ğŸ“¡ Ù„ÛŒÙ†Ú© Ø³Ø§Ø¨ Ø¨Ø§ Ø´Ù…Ø§Ø±Ù‡ Ø³Ø±ÙˆÛŒØ³ (Ø§Ø±Ø³Ø§Ù„ Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù…) ğŸ“¡</button>
                </div>
                <div class="btnslist">
                    <button dir="rtl" class="btn" onclick="copyToClipboard('#qrcode_link')">ğŸ“¡ Ù„ÛŒÙ†Ú© Ø³Ø§Ø¨ Ø¨Ø§ QrCode (Ø§Ø±Ø³Ø§Ù„ Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù…) ğŸ“¡</button>
                </div>
                    <hr style="width: 100%; background-color: #d6d6d6">
                <div class="btnslist">
                    <button class="btn" onclick="copyToClipboard('#configs')"> ğŸ“¡ Ú©Ù¾ÛŒ Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§ ğŸ“¡</button>
                </div>


                    <p hidden id="vless">{{ sub_link_with_name }}</p>
                    <p hidden id="configs">{{ configs }}</p>
                    <p hidden id="qrcode_link">{{ qrcode_link }}</p>
                    <p hidden id="bot_link" style="white-space: pre-line;">{{ sub_link }}</p>
                <hr style="width: 100%; background-color: #d8d8d8">
                <hr style="width: 100%; background-color: #d6d6d6">

                <div style="display: flex; flex-direction: column; align-items: center">
                    <img style="width: 70%" src="/media/{{ service.uuid }}.jpg" alt="">
                </div>
                <hr style="width: 100%; background-color: #d8d8d8">
                <hr style="width: 100%; background-color: #d6d6d6">
                <div class="conf_btnsbox">
                {% if user.create_config_acc %}
                    <a class="conf_btnss tamdid_btn" href="{% url "configs:sellers_renew" service.uuid "auto" %}"><img class="restart" src="{% static "img/icons8-restart-512.png" %}" alt=""> ØªÙ…Ø¯ÛŒØ¯ </a>
                {% endif %}

                {% if user.level_access == 10 %}
                    <a class="conf_btnss change_btn" href="{% url "configs:sellers_change_config" service.uuid %}"><img class="enable" src="{% static "img/setting.png" %}" alt=""> ÙˆÛŒØ±Ø§ÛŒØ´ </a>
                {% endif %}

                {% if user.disable_config_acc %}
                    {% if service.status == 1 %}
                        <a class="conf_btnss disable_btn" href="{% url 'configs:disable_config' service.uuid 1 %}"><img class="disable" src="{% static "img/enable.png" %}" alt=""> ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† </a>
                    {% else %}
                        <a class="conf_btnss disable_btn" href="{% url 'configs:disable_config' service.uuid 0 %}"><img class="enable" src="{% static "img/disable.png" %}" alt=""> ØºÛŒØ±ÙØ¹Ø§Ù„ </a>
                    {% endif %}
                {% endif %}
                {% if user.delete_config_acc %}
                    <a class="conf_btnss delete_btn" href="{% url "configs:delete_config" service.uuid %}"><img class="del_img" src="{% static 'img/icons8-delete-64.png' %}" alt=""> Ø­Ø°Ù </a>
                {% endif %}
                </div>
            </div>


        </div>

<script>
            function copyToClipboard(element) {
          var $temp = $("<textarea>");
          $("body").append($temp);
          var text = $(element).text();
          $temp.val(text).select();
          document.execCommand("copy");
          $temp.remove();
          alert("Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ú©Ù¾ÛŒ Ø´Ø¯.");
        }
</script>
{% if config_info %}
            <h4 id="his">History</h4>
            <div class="xcontainer">

		    		<table class="overflow-y">
		    			<thead>
		    				<tr>
                                <th>Data/Time</th>
                                <th>ÙAction</th>
		    				</tr>
		    			</thead>
		    			<tbody>
                        {% for x in conf_log %}
                            <tr>
                                <td>
                                    {{ x.timestamp|timestamp }}
                                </td>
                                <td dir="ltr">
                                    {{ x.action }}
                                </td>
                            </tr>
                        {% endfor %}
		    			</tbody>
		    		</table>
            </div>
{% endif %}

{% endif %}
    </div>
{% include "loading.html" %}

</body>
</html>